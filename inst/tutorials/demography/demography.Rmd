---
title: "Demographic Data Summaries with `zoopop`"
tutorial:
  id: "demography"
  version: 1.0
author: "Alicia Rich"
date: "`r Sys.Date()`"
output: learnr::tutorial
runtime: shiny_prerendered
                     
---

## Introduction

### Goal

This tutorial will walk through example data summary and visualization tools using the `zoopop` package.

### Details

I am going to use the Pygmy Slow Loris population reports to generate a reproducible report that summarizes:

1.  Population Size and Composition

2.  Historic Demographic Trends Compared Across Generations

2.  Contemporary Patterns of Genetic Diversity and Relatedness

3.  Projected Population Viability

### Files Needed

I am loading two csv files created with the `zoopop` package: 

1.  A studbook organized into rows containing static profiles of individuals across the entire population history and individual transfer and breeding events over each individual's lifetime: `studbook.csv`

2.  A table where every institution appearing in the studbook is represented by a single row: `locations.csv`

For more information, see the tutorial below.

```{r eval=FALSE}
learnr::run_tutorial("new_studbook", package = "zoopop")
```



## Setup

```{r setup, context="setup"}
here::i_am("inst/tutorials/demography/demography.Rmd")
library(conflicted)
library(here)
library(knitr)
library(learnr)
library(shiny)
library(tidyverse)
library(zoopop)
knitr::opts_chunk$set(
  collapse = TRUE,
  message  = FALSE,
  warning  = FALSE,
  echo     = TRUE,
  include  = TRUE,
  eval     = TRUE,
  comment  = ""
)
conflicts_prefer(lubridate::interval)
conflicts_prefer(dplyr::filter)


loc_key  <- read_csv(here("inst/extdata/locations.csv"))
studbook <- read_csv(here("inst/extdata/studbook.csv"))
```

# Studbook Overview

Let's create a graphical table to summarize our studbook data.

```{r studbook-view, exercise=TRUE}
studbook.tbl <- studbook %>% studbook_react(., studbook.cols(.), groupBy = "Status")
studbook.tbl
```

## Summarize Demographic Trends

Let's look at the basic population size over time to begin quantifying growth rate and assessing overall population viability.

```{r census-setup, exercise=TRUE}
raw.counts      <- census(studbook, "years")
```



