---
title: "Code Scratch"
author: "Alicia Rich"
date: "`r Sys.Date()`"
output: html_document
                     
---

```{r setup, include=FALSE}
library(devtools)
library(roxygen2)
```

```{r include=FALSE}
document()
```


```{r include=FALSE}
install()
```

```{r include=FALSE}
library(conflicted)
library(devtools)
library(DiagrammeR)
library(here)
library(igraph)
library(knitr)
library(magrittr)
library(pedtools)
library(roxygen2)
library(tidyverse)
library(visNetwork)
knitr::opts_chunk$set(
  collapse = TRUE,
  message  = FALSE,
  warning  = FALSE,
  echo     = TRUE,
  include  = TRUE,
  eval     = TRUE,
  comment  = ""
)
conflicts_prefer(lubridate::interval)
conflicts_prefer(dplyr::filter)
conflicts_prefer(purrr::set_names)
studbook <- read_csv(here("inst/extdata/studbook.csv"))
pedigree <- featured_pedigree(studbook)
```

```{r}
demog <- cohort_demog(studbook, cohort_params = list(span = 5))
```


```{r}
lifetime <- lifetime_tab(studbook, 
                         cohort_params = list(span = 5)) %>%
  distinct() %>%
  mutate(Sex = fct_recode(Sex, Overall = "Total", Males = "M", Females = "F")) %>%
  mutate(Sex = fct_relevel(Sex, "Males", "Females", "Overall")) %>%
  arrange(Cohort_period, Sex) %>% 
  select(
    Cohort_years,
    Sex,
    r,
    N1,
    T,
    MLE,
    repro_first,
    repro_last,
    age_max,
    R0
  ) %>%
  group_by(Cohort_years)
```


```{r}
table <- reactable(
  lifetime,
  borderless = TRUE,
  rowStyle   = rows_bySex(),
  columns    = list(
    Cohort_years = Cohort_years(),
    r            = intrins_rate(),
    T            = gen_T(lifetime),
    MLE          = MLE(lifetime),
    repro_first  = age_ranges(lifetime),
    repro_last   = colDef(show = FALSE),
    age_max      = colDef(show = FALSE)
  )
)
table
```


