---
title: "Code Scratch"
author: "Alicia Rich"
date: "`r Sys.Date()`"
output: html_document
                     
---

```{r setup, include=FALSE}
library(devtools)
library(roxygen2)
```

```{r include=FALSE}
document()
```


```{r include=FALSE}
install()
```

```{r include=FALSE}
library(conflicted)
library(here)
library(knitr)
library(magrittr)
library(pedtools)
library(reactable)
library(reactablefmtr)
library(htmlwidgets)
library(htmltools)
library(tidyverse)
library(tippy)
library(visNetwork)
knitr::opts_chunk$set(
  collapse = TRUE,
  message  = FALSE,
  warning  = FALSE,
  echo     = TRUE,
  include  = TRUE,
  eval     = TRUE,
  comment  = ""
)
conflicts_prefer(lubridate::interval)
conflicts_prefer(dplyr::filter)
conflicts_prefer(purrr::set_names)
studbook <- read_csv(here("inst/extdata/studbook.csv"))
pedigree <- featured_pedigree(studbook)
```

```{r}
demog <- cohort_demog(studbook, cohort_params = list(span = 5))
```



```{r}
 summary_df <- footer_lifetime(studbook)
```

```{r}
data <- cohort_demog(studbook, list(span = 5))  %>%
    mutate(Sex = fct_recode(Sex,
                            Overall = "Total",
                            Males   = "M",
                            Females = "F")) %>%
    mutate(Sex = fct_relevel(Sex,
                             "Males",
                             "Females",
                             "Overall")) %>%
    select(Cohort_period:r) %>%
    distinct() %>%
    rename(y_var = "R0") %>%
    mutate(Cohort_start = as.integer(str_extract_all(Cohort_years, "^\\d{4}")))
```

 %>%
    accumulate_by(~Cohort_start)

```{r}
plot <- plot_demog_age(studbook, list(span = 5), "Fx")
plot
```

```{r}
plot <- plot_demog(studbook, list(span = 5), "R0")
```


```{r}
total <- demog_ungrouped(studbook)  %>%
    filter(Sex == "Total") %>%
    rename(y_var = "r") %>%
    distinct()
```

```{r}
overall_val <- pull(total, y_var) %>% unique()
```

